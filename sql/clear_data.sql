delete from planet_osm_polygon where not st_intersects(st_geomfromtext('Polygon ((1832056.45131716760806739 6321422.81191168166697025, 1832375.11276200390420854 6304571.24491711147129536, 1857736.81481278594583273 6304271.32826314773410559, 1857380.66378620429895818 6321366.57753906305879354, 1857380.66378620429895818 6321366.57753906305879354, 1832056.45131716760806739 6321422.81191168166697025))', 900913),way);


delete from planet_osm_line where not st_intersects(st_geomfromtext('Polygon ((1832056.45131716760806739 6321422.81191168166697025, 1832375.11276200390420854 6304571.24491711147129536, 1857736.81481278594583273 6304271.32826314773410559, 1857380.66378620429895818 6321366.57753906305879354, 1857380.66378620429895818 6321366.57753906305879354, 1832056.45131716760806739 6321422.81191168166697025))', 900913),way);


delete from planet_osm_point where not st_intersects(st_geomfromtext('Polygon ((1832056.45131716760806739 6321422.81191168166697025, 1832375.11276200390420854 6304571.24491711147129536, 1857736.81481278594583273 6304271.32826314773410559, 1857380.66378620429895818 6321366.57753906305879354, 1857380.66378620429895818 6321366.57753906305879354, 1832056.45131716760806739 6321422.81191168166697025))', 900913),way);


delete from planet_osm_roads where not st_intersects(st_geomfromtext('Polygon ((1832056.45131716760806739 6321422.81191168166697025, 1832375.11276200390420854 6304571.24491711147129536, 1857736.81481278594583273 6304271.32826314773410559, 1857380.66378620429895818 6321366.57753906305879354, 1857380.66378620429895818 6321366.57753906305879354, 1832056.45131716760806739 6321422.81191168166697025))', 900913),way);


drop table planet_osm_ways;

drop table planet_osm_nodes;

drop table planet_osm_rels;


delete from planet_osm_polygon where boundary is not null;

delete from planet_osm_polygon where barrier is not null;



ALTER TABLE planet_osm_polygon ADD COLUMN type varchar(30);

update planet_osm_polygon set type = 'water' where planet_osm_polygon.natural in ('water', 'bay');
update planet_osm_polygon set type = 'forest' where landuse in ('forest');
update planet_osm_polygon set type = 'rock' where planet_osm_polygon.natural in ('bare_rock', 'scree', 'cliff', 'rock', 'stone');

